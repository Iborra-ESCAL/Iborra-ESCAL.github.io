<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soru Testi: 3D Prototipleme</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit', sans-serif; background-color: #f8fafc; }
        .glass-card {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(229, 231, 235, 0.5);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            height: 250px;
            margin: auto;
        }
        #progress-bar { transition: width 0.3s ease-out; }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .error-item {
            border-left: 4px solid #f43f5e;
            background: #fff1f2;
        }
    </style>
</head>
<body class="text-slate-900 p-2 md:p-8">

    <div id="app" class="max-w-4xl mx-auto">
        <!-- BA≈ûLANGI√á EKRANI -->
        <div id="start-screen" class="glass-card rounded-3xl p-8 md:p-12 shadow-2xl text-center border-t-8 border-indigo-600 fade-in">
            <div class="text-6xl mb-6 text-indigo-600">‚öôÔ∏è</div>
            <h1 class="text-4xl font-black text-slate-900 mb-4 tracking-tight">Soru Testi</h1>
            <p class="text-lg text-slate-600 mb-8 leading-relaxed">
                Hƒ±zlƒ± Prototipleme, 3D Teknolojileri ve RepRap Hareketi √ºzerine teknik deƒüerlendirme testi.
            </p>
            <div class="bg-indigo-50 rounded-2xl p-6 mb-8 border border-indigo-100 max-w-md mx-auto">
                <div class="flex justify-around text-indigo-900 font-bold">
                    <div class="text-center">
                        <span class="block text-3xl">50</span>
                        <span class="text-xs uppercase opacity-60">Soru</span>
                    </div>
                    <div class="w-px bg-indigo-200"></div>
                    <div class="text-center">
                        <span class="block text-3xl">100%</span>
                        <span class="text-xs uppercase opacity-60">Teknik</span>
                    </div>
                </div>
            </div>
            <button id="start-btn" onclick="quiz.start()" class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white font-black py-5 px-16 rounded-2xl shadow-xl transition-all hover:scale-105 active:scale-95 tracking-wide">
                TESTƒ∞ BA≈ûLAT
            </button>
        </div>

        <!-- TEST KONTEYNERI -->
        <div id="quiz-container" class="hidden fade-in">
            <div class="flex justify-between items-end mb-4 px-2">
                <div>
                    <span class="text-xs font-black text-indigo-600 uppercase tracking-widest text-indigo-500">Test ƒ∞lerlemesi</span>
                    <h3 class="text-xl font-bold text-slate-800" id="progress-text">Soru 1 / 50</h3>
                </div>
                <div class="text-right">
                    <span id="score-live" class="bg-indigo-100 text-indigo-700 px-4 py-1 rounded-full text-sm font-bold shadow-sm">Puan: 0</span>
                </div>
            </div>
            <div class="w-full bg-slate-200 rounded-full h-3 mb-8 overflow-hidden">
                <div id="progress-bar" class="bg-indigo-600 h-full" style="width: 2%"></div>
            </div>

            <div class="glass-card rounded-3xl p-6 md:p-10 shadow-xl min-h-[500px] flex flex-col justify-between">
                <div id="question-area">
                    <h2 id="question-title" class="text-2xl font-extrabold text-slate-800 mb-8 leading-tight"></h2>
                    <div id="options-grid" class="grid grid-cols-1 gap-4"></div>
                </div>
                <div class="mt-10 flex flex-col md:flex-row justify-between items-center gap-4 border-t border-slate-100 pt-6">
                    <p class="text-slate-400 text-xs italic">Devam etmek i√ßin bir cevap se√ßmelisiniz</p>
                    <button id="next-btn" onclick="quiz.next()" disabled class="w-full md:w-auto bg-slate-300 text-white font-black py-4 px-12 rounded-2xl cursor-not-allowed transition-all shadow-lg">
                        SONRAKƒ∞
                    </button>
                </div>
            </div>
        </div>

        <!-- SONU√á EKRANI -->
        <div id="results-screen" class="hidden fade-in space-y-8">
            <div class="glass-card rounded-3xl p-8 md:p-12 shadow-2xl border-t-8 border-indigo-600 text-center">
                <div class="text-5xl mb-4">üèÜ</div>
                <h2 class="text-4xl font-black text-slate-900 mb-2">Test Tamamlandƒ±!</h2>
                <div id="final-score" class="text-7xl font-black text-indigo-600 mb-6">0 / 50</div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center text-left">
                    <div class="chart-container">
                        <canvas id="resultsChart"></canvas>
                    </div>
                    <div class="bg-slate-50 p-6 rounded-2xl border border-slate-200 shadow-sm">
                        <h3 class="text-xl font-bold text-indigo-900 mb-4">Sonu√ß Analizi</h3>
                        <div id="performance-summary" class="space-y-3"></div>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mt-10">
                    <button onclick="quiz.copyResults()" class="bg-slate-800 hover:bg-slate-900 text-white font-bold py-4 px-6 rounded-xl flex items-center justify-center gap-2 transition-all">
                        <span>üìã</span> Sonu√ßlarƒ± Kopyala
                    </button>
                    <button onclick="quiz.sendEmail()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-6 rounded-xl flex items-center justify-center gap-2 transition-all">
                        <span>üìß</span> E-posta ile G√∂nder
                    </button>
                    <button onclick="window.location.reload()" class="bg-white hover:bg-slate-50 text-slate-600 font-bold py-4 px-6 rounded-xl border-2 border-slate-200 transition-all">
                        <span>üîÑ</span> Yeniden Ba≈ülat
                    </button>
                </div>
            </div>

            <!-- HATA Lƒ∞STESƒ∞ -->
            <div id="error-section" class="hidden fade-in bg-white rounded-3xl p-6 md:p-10 shadow-xl border border-slate-200">
                <div class="flex items-center gap-3 mb-6">
                    <div class="h-8 w-2 bg-rose-500 rounded-full"></div>
                    <h3 class="text-2xl font-black text-slate-800">Yanlƒ±≈ü Cevaplarƒ±n ƒ∞ncelenmesi</h3>
                </div>
                <div id="error-list" class="space-y-4"></div>
            </div>
        </div>
    </div>

    <textarea id="copy-buffer" class="fixed -top-full left-0 opacity-0 pointer-events-none"></textarea>

    <script>
        const quizData = [
            { q: "Plastik tozunu kayna≈ütƒ±rmak i√ßin lazer kullanan teknoloji hangisidir?", a: ["SLS", "FDM", "SLA", "LOM"], c: 0 },
            { q: "3D baskƒ± i√ßin evrensel dosya formatƒ± nedir?", a: ["GCODE", "CAD", "STL", "OBJ"], c: 2 },
            { q: "Stereolitografi (SLA) malzemeyi ne kullanarak sertle≈ütirir?", a: ["Basƒ±n√ß", "UV I≈üƒ±ƒüƒ±", "Isƒ±", "Kesme"], c: 1 },
            { q: "FFF ve FDM arasƒ±ndaki fark nedir?", a: ["FFF metal kullanƒ±r", "Teknolojileri tamamen farklƒ±dƒ±r", "Teknik fark yoktur", "FDM tescilli marka, FFF a√ßƒ±k kaynak terimidir"], c: 3 },
            { q: "Kesilmi≈ü kaƒüƒ±t veya plastik katmanlarƒ±nƒ± kullanan teknik hangisidir?", a: ["LOM", "SLS", "Binder Jetting", "FDM"], c: 0 },
            { q: "Binder Jetting (P√ºsk√ºrtmeli birle≈ütirme) neye dayanƒ±r?", a: ["Filament eritme", "Lazer k√ºrleme", "Tozu sƒ±vƒ± yapƒ±≈ütƒ±rƒ±cƒ± ile birle≈ütirme", "Manuel katmanlama"], c: 2 },
            { q: "Adrian Bowyer RepRap projesini hangi yƒ±lda kurdu?", a: ["2000", "2010", "2005", "2015"], c: 2 },
            { q: "Bir RepRap yazƒ±cƒ±sƒ±nƒ±n en temel √∂zelliƒüi nedir?", a: ["√áok pahalƒ± olmasƒ±", "Kendi par√ßalarƒ±nƒ± basabilmesi", "Sadece Arduino Uno kullanmasƒ±", "Yazƒ±lƒ±m gerektirmemesi"], c: 1 },
            { q: "Arduino, hobby ama√ßlƒ± 3D baskƒ±da neden temel bir √∂ƒüedir?", a: ["Tasarƒ±m yazƒ±lƒ±mƒ±dƒ±r", "Kapalƒ± bir donanƒ±mdƒ±r", "A√ßƒ±k kaynaklƒ± bir donanƒ±mdƒ±r", "Bir filament markasƒ±dƒ±r"], c: 2 },
            { q: "Filamenti ƒ±sƒ±tƒ±p eriten par√ßaya ne ad verilir?", a: ["Yatak", "Hotend (Ekstr√ºder ucu)", "Fan", "Makara"], c: 1 },
            { q: "Bir fikirden sonraki ilk adƒ±m nedir?", a: ["Baskƒ± almak", "CAD tasarƒ±mƒ± veya nesne temini", "Filament satƒ±n almak", "Dilimleme yapmak"], c: 1 },
            { q: "3D tasarƒ±mlarƒ±n payla≈üƒ±ldƒ±ƒüƒ± en √ºnl√º depo hangisidir?", a: ["Thingiverse", "Spotify", "Wikipedia", "Instagram"], c: 0 },
            { q: "Fusion 360 veya Solidworks ne t√ºr yazƒ±lƒ±mlardƒ±r?", a: ["CAD", "Dilimleyici", "Firmware", "Onarƒ±cƒ±"], c: 0 },
            { q: "Netfabb yazƒ±lƒ±mƒ± temel olarak ne i√ßin kullanƒ±lƒ±r?", a: ["√áizim yapmak", "G-Kodu olu≈üturmak", "Mesh onarƒ±mƒ± ve oryantasyon kontrol√º", "Tasarƒ±m satmak"], c: 2 },
            { q: "Dilimleme (Slicing) i≈ülemi nedir?", a: ["3D modeli katmanlara ve G-Koduna d√∂n√º≈üt√ºrmek", "Nozulu temizlemek", "Par√ßayƒ± boyamak", "Par√ßalarƒ± birle≈ütirmek"], c: 0 },
            { q: "Slic3r yazƒ±lƒ±mƒ± doƒürudan hangisine evrilmi≈ütir?", a: ["Cura", "Simplify3D", "Blender", "PrusaSlicer"], c: 3 },
            { q: "Hangi malzeme biyobozunur ve basƒ±mƒ± kolaydƒ±r?", a: ["ABS", "Naylon", "Polikarbonat", "PLA"], c: 3 },
            { q: "ABS malzemenin √ßarpƒ±lmasƒ±nƒ± (warping) √∂nlemek i√ßin ne gerekir?", a: ["%100 Fan hƒ±zƒ±", "UV I≈üƒ±ƒüƒ±", "Isƒ±tƒ±cƒ± tabla ve stabil ortam", "Lazer kesim"], c: 2 },
            { q: "Katman y√ºksekliƒüi (layer height) doƒürudan neyi etkiler?", a: ["Rengi", "Motor aƒüƒ±rlƒ±ƒüƒ±nƒ±", "Dikey √ß√∂z√ºn√ºrl√ºƒü√º ve s√ºreyi", "Yazƒ±cƒ± markasƒ±nƒ±"], c: 2 },
            { q: "Akƒ±≈ü (Flow) nedir?", a: ["Ekstr√ºde edilen malzeme miktarƒ±", "Fanlarƒ±n hƒ±zƒ±", "Ortam sƒ±caklƒ±ƒüƒ±", "Taban tasarƒ±mƒ±"], c: 0 },
            { q: "Ender 3 ne t√ºr bir yapƒ±ya sahip yazƒ±cƒ±dƒ±r?", a: ["Delta", "Kartezyen", "Polar", "SCARA"], c: 1 },
            { q: "Ender 3 Neo modelinde standart olarak ne bulunur?", a: ["Lazer kazƒ±yƒ±cƒ±", "CR-Touch otomatik seviyeleme", "Wi-Fi kamera", "Filament kurutucu"], c: 1 },
            { q: "Wasp Delta 2040 hangi mimarisiyle tanƒ±nƒ±r?", a: ["Y√ºksek hƒ±zlƒ± Delta yapƒ±sƒ±", "K√ºbik yapƒ±", "Re√ßine yapƒ±sƒ±", "Kaƒüƒ±t yapƒ±sƒ±"], c: 0 },
            { q: "Bir mesh yapƒ±sƒ±nƒ±n 'Manifold' olmamasƒ± ne anlama gelir?", a: ["√áok g√ºzel olmasƒ±", "Geometrik hatalar veya delikler olmasƒ±", "Kƒ±rmƒ±zƒ± renkli olmasƒ±", "√áok b√ºy√ºk olmasƒ±"], c: 1 },
            { q: "G-Kodu (GCode) ne t√ºr bir dildir?", a: ["Makineler i√ßin sayƒ±sal komutlar", "G√∂rsel programlama", "Sanatsal tasarƒ±m", "Veritabanƒ± dili"], c: 0 },
            { q: "Par√ßanƒ±n i√ß doluluk oranƒ±nƒ± hangi parametre kontrol eder?", a: ["Kabuklar (Shells)", "Brim", "Skirt", "Dolgu (Infill)"], c: 3 },
            { q: "'Brim' (Kenarlƒ±k) ne i≈üe yarar?", a: ["Tablaya yapƒ±≈ümayƒ± artƒ±rƒ±r", "Malzeme tasarrufu saƒülar", "Nozulu soƒüutur", "Par√ßayƒ± temizler"], c: 0 },
            { q: "Ekstr√ºder sƒ±caklƒ±ƒüƒ± √ßok d√º≈ü√ºk olursa ne olur?", a: ["Plastik yanar", "Baskƒ± hƒ±zlanƒ±r", "Tƒ±kanmalar ve k√∂t√º yapƒ±≈üma", "Etkisi yoktur"], c: 2 },
            { q: "PLA filamenti neden √ºretilir?", a: ["Petrol", "Kum", "Geri d√∂n√º≈üt√ºr√ºlm√º≈ü ah≈üap", "Mƒ±sƒ±r ni≈üastasƒ± veya ≈üeker kamƒ±≈üƒ±"], c: 3 },
            { q: "Geri √áekme (Retraction) nedir?", a: ["Z ekseni hareketi", "ƒ∞plenmeyi √∂nlemek i√ßin filamentin geri √ßekilmesi", "Yazƒ±cƒ±yƒ± kapatmak", "Tablayƒ± temizlemek"], c: 1 },
            { q: "Dilimleyicide %100 Dolgu (Infill) ne anlama gelir?", a: ["ƒ∞√ßi bo≈ü par√ßa", "≈ûeffaf par√ßa", "Tamamen dolu par√ßa", "Okuma hatasƒ±"], c: 2 },
            { q: "Filamenti ƒ±sƒ±tan bile≈üen hangisidir?", a: ["Motor", "Ekran", "G√º√ß kaynaƒüƒ±", "Hotend"], c: 3 },
            { q: "Delta yazƒ±cƒ±lar nasƒ±l hareket eder?", a: ["√ú√ß eklemli kol ile", "ƒ∞ki √ßapraz kayƒ±≈ü ile", "Tek bir merkezi motor ile", "Lastik tekerlekler ile"], c: 0 },
            { q: "Katman soƒüutma fanƒ± ne i≈üe yarar?", a: ["Motorlarƒ± soƒüutur", "Yeni serilen plastiƒüi soƒüutur", "Tozu temizler", "Dekorasyon"], c: 1 },
            { q: "Overhang (Sarkma) nedir?", a: ["√áok k√º√ß√ºk bir par√ßa", "Bir filament t√ºr√º", "Desteksiz asƒ±lƒ± kalan kƒ±sƒ±mlar", "Veri kablosu"], c: 2 },
            { q: "Destek (Support) yapƒ±larƒ± ne zaman gereklidir?", a: ["Havada kalan dik a√ßƒ±lar olduƒüunda", "Par√ßa d√ºz olduƒüunda", "√áok dolgu kullandƒ±ƒüƒ±mƒ±zda", "Tabla soƒüuk olduƒüunda"], c: 0 },
            { q: "RepRap lisansƒ± genellikle nedir?", a: ["GPL (A√ßƒ±k Kaynak Yazƒ±lƒ±m/Donanƒ±m)", "Microsoft m√ºlkiyetinde", "√ñzel m√ºlkiyet", "Sadece √ºniversiteler i√ßindir"], c: 0 },
            { q: "Hangi malzeme g√º√ßl√º bir yanƒ±k plastik (stiren) kokusu yayar?", a: ["PLA", "ABS", "PETG", "Ah≈üap"], c: 1 },
            { q: "Blender, Solidworks'ten hangi y√∂n√ºyle ayrƒ±lƒ±r?", a: ["Daha pahalƒ± olmasƒ±", "Organik ve sanatsal modelleme odaklƒ± olmasƒ±", "Sadece m√ºhendisler i√ßindir", "STL dƒ±≈üa aktarƒ±mƒ± yapmaz"], c: 1 },
            { q: "Bir STL dosyasƒ± y√ºzeyi ne ile temsil eder?", a: ["Piksel", "Denklem", "√ú√ßgenler (Teselasyon)", "Nokta bulutlarƒ±"], c: 2 },
            { q: "Tipik baskƒ± hƒ±zƒ± genellikle hangi aralƒ±ktadƒ±r?", a: ["40-80 mm/s", "5-10 mm/s", "500-1000 mm/s", "1-2 mm/s"], c: 0 },
            { q: "Z-Offset nedir?", a: ["Par√ßanƒ±n geni≈üliƒüi", "Yazƒ±cƒ±nƒ±n adƒ±", "Nozul ile tabla arasƒ±ndaki mesafe", "Fan hƒ±zƒ±"], c: 2 },
            { q: "RepRap projesi neyin demokratikle≈ümesini hedefler?", a: ["Ki≈üisel √ºretim", "M√ºzik", "Tarƒ±m", "Enerji"], c: 0 },
            { q: "Marlin neye bir √∂rnektir?", a: ["CAD tasarƒ±mƒ±", "Filament markasƒ±", "3D yazƒ±cƒ± yazƒ±lƒ±mƒ± (Firmware)", "Dilimleyici"], c: 2 },
            { q: "Yatay yan hareketi hangi eksen kontrol eder?", a: ["X Ekseni", "Y Ekseni", "Z Ekseni", "E Ekseni"], c: 0 },
            { q: "Isƒ±tƒ±cƒ± tabla (Heated bed) hangi malzemede opsiyoneldir?", a: ["ABS", "PLA", "Naylon", "Polikarbonat"], c: 1 },
            { q: "TraceParts ne t√ºr bir portaldƒ±r?", a: ["Haber sitesi", "Yazƒ±cƒ± satƒ±≈ü sitesi", "Teknik CAD modelleri ve standart par√ßalar", "Kullanƒ±cƒ± sohbet kanalƒ±"], c: 2 },
            { q: "'Skirt' (Etek) ne i≈üe yarar?", a: ["Par√ßayƒ± sabitlemek", "Ekstr√ºderi baskƒ± √∂ncesi hazƒ±rlamak (purging)", "S√ºsleme", "Isƒ± yalƒ±tƒ±mƒ±"], c: 1 },
            { q: "Bir yazƒ±cƒ±nƒ±n 'Open Source' (A√ßƒ±k Kaynak) olmasƒ± ne demektir?", a: ["Planlarƒ±nƒ±n ve kodlarƒ±nƒ±n halka a√ßƒ±k olmasƒ±", "√úcretsiz olmasƒ±", "Kablosuz olmasƒ±", "ƒ∞nternetten satƒ±n alƒ±nmasƒ±"], c: 0 },
            { q: "3D baskƒ± bir eklemeli (additive) teknoloji midir?", a: ["Hayƒ±r, eksiltmelidir", "Sadece kaƒüƒ±t prototipler i√ßindir", "Evet, katman katman malzeme ekler", "Artƒ±k kullanƒ±lmƒ±yor"], c: 2 }
        ];

        let currentQuestion = 0;
        let score = 0;
        let selectedOption = null;
        let chartInstance = null;
        let errors = [];

        const quiz = {
            start() {
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('quiz-container').classList.remove('hidden');
                this.renderQuestion();
            },
            renderQuestion() {
                const q = quizData[currentQuestion];
                document.getElementById('question-title').innerText = q.q;
                document.getElementById('progress-text').innerText = `Soru ${currentQuestion + 1} / 50`;
                document.getElementById('progress-bar').style.width = `${((currentQuestion + 1) / 50) * 100}%`;
                
                const grid = document.getElementById('options-grid');
                grid.innerHTML = '';
                
                q.a.forEach((opt, idx) => {
                    const btn = document.createElement('button');
                    btn.className = "option-btn w-full text-left p-5 rounded-2xl border-2 border-slate-100 hover:border-indigo-200 hover:bg-indigo-50 transition-all font-semibold flex items-center gap-4 bg-white";
                    btn.innerHTML = `<span class="h-10 w-10 shrink-0 rounded-xl bg-slate-100 flex items-center justify-center text-sm font-black text-slate-500 border border-slate-200">${String.fromCharCode(65 + idx)}</span> <span class="text-slate-700">${opt}</span>`;
                    btn.onclick = () => this.selectOption(idx, btn);
                    grid.appendChild(btn);
                });
                
                const nextBtn = document.getElementById('next-btn');
                nextBtn.disabled = true;
                nextBtn.className = "w-full md:w-auto bg-slate-200 text-white font-black py-4 px-12 rounded-2xl cursor-not-allowed transition-all shadow-lg";
                nextBtn.innerText = currentQuestion === 49 ? "TESTƒ∞ Bƒ∞Tƒ∞R" : "SONRAKƒ∞ SORU";
            },
            selectOption(idx, btn) {
                selectedOption = idx;
                document.querySelectorAll('.option-btn').forEach(b => {
                    b.classList.remove('border-indigo-600', 'bg-indigo-50', 'ring-4', 'ring-indigo-100');
                    b.classList.add('border-slate-100', 'bg-white');
                });
                
                btn.classList.remove('border-slate-100', 'bg-white');
                btn.classList.add('border-indigo-600', 'bg-indigo-50', 'ring-4', 'ring-indigo-100');
                
                const nextBtn = document.getElementById('next-btn');
                nextBtn.disabled = false;
                nextBtn.className = "w-full md:w-auto bg-indigo-600 text-white font-black py-4 px-12 rounded-2xl cursor-pointer transition-all shadow-lg hover:bg-indigo-700 active:scale-95";
            },
            next() {
                const correctIdx = quizData[currentQuestion].c;
                if (selectedOption === correctIdx) {
                    score++;
                } else {
                    errors.push({
                        q: quizData[currentQuestion].q,
                        correct: quizData[currentQuestion].a[correctIdx]
                    });
                }
                
                document.getElementById('score-live').innerText = `Puan: ${score}`;
                
                currentQuestion++;
                if (currentQuestion < quizData.length) {
                    selectedOption = null;
                    this.renderQuestion();
                } else {
                    this.showResults();
                }
            },
            showResults() {
                document.getElementById('quiz-container').classList.add('hidden');
                document.getElementById('results-screen').classList.remove('hidden');
                document.getElementById('final-score').innerText = `${score} / 50`;
                
                const percentage = (score / 50) * 100;
                let feedback = percentage >= 90 ? "Uzman" : percentage >= 70 ? "ƒ∞leri D√ºzey" : percentage >= 50 ? "Teknisyen" : "Ba≈ülangƒ±√ß D√ºzeyi";
                let colorClass = percentage >= 50 ? "text-emerald-600" : "text-rose-600";

                document.getElementById('performance-summary').innerHTML = `
                    <div class="flex justify-between items-center py-2 border-b border-slate-200">
                        <span class="font-bold text-slate-500">Deƒüerlendirme:</span>
                        <span class="font-black ${colorClass}">${feedback}</span>
                    </div>
                    <div class="flex justify-between items-center py-2 border-b border-slate-200">
                        <span class="font-bold text-slate-500">Y√ºzde:</span>
                        <span class="font-black text-slate-800">%${percentage}</span>
                    </div>
                    <div class="flex justify-between items-center py-2">
                        <span class="font-bold text-slate-500">Puanlar:</span>
                        <span class="font-black text-indigo-600">${score} / 50</span>
                    </div>
                `;

                if (errors.length > 0) {
                    document.getElementById('error-section').classList.remove('hidden');
                    const errorList = document.getElementById('error-list');
                    errorList.innerHTML = '';
                    errors.forEach(err => {
                        const div = document.createElement('div');
                        div.className = "error-item p-4 rounded-xl shadow-sm fade-in";
                        div.innerHTML = `
                            <p class="text-slate-800 font-bold mb-2">${err.q}</p>
                            <p class="text-emerald-700 text-sm font-semibold">Doƒüru cevap: ${err.correct}</p>
                        `;
                        errorList.appendChild(div);
                    });
                }

                this.renderChart();
            },
            renderChart() {
                const ctx = document.getElementById('resultsChart').getContext('2d');
                if(chartInstance) chartInstance.destroy();
                
                chartInstance = new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: wrapLabels(['Doƒüru', 'Yanlƒ±≈ü']),
                        datasets: [{
                            data: [score, 50 - score],
                            backgroundColor: ['#4f46e5', '#e2e8f0'],
                            borderWidth: 0,
                            borderRadius: 10
                        }]
                    },
                    options: {
                        cutout: '70%',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    title: function(items) {
                                        let label = items[0].chart.data.labels[items[0].dataIndex];
                                        return Array.isArray(label) ? label.join(' ') : label;
                                    }
                                }
                            }
                        }
                    }
                });
            },
            copyResults() {
                const text = `3D Baskƒ± Test Sonu√ßlarƒ±:\nPuan: ${score} / 50 (%${(score/50)*100})\nHata Sayƒ±sƒ±: ${errors.length}`;
                const buffer = document.getElementById('copy-buffer');
                buffer.value = text;
                buffer.select();
                document.execCommand('copy');
                
                const btn = event.currentTarget;
                const original = btn.innerHTML;
                btn.innerHTML = '<span>‚úÖ</span> Kopyalandƒ±!';
                setTimeout(() => btn.innerHTML = original, 2000);
            },
            sendEmail() {
                const subject = encodeURIComponent("3D Prototipleme Test Sonu√ßlarƒ±");
                const body = encodeURIComponent(`3D Baskƒ± teknik testini tamamladƒ±m.\n\nFinal Skoru: 50 √ºzerinden ${score} (%${(score/50)*100}).`);
                window.location.href = `mailto:?subject=${subject}&body=${body}`;
            }
        };

        function wrapLabels(labels) {
            return labels.map(label => {
                if (label.length > 16) {
                    const words = label.split(' ');
                    const lines = [];
                    let current = "";
                    words.forEach(w => {
                        if ((current + w).length > 16) {
                            lines.push(current.trim());
                            current = w + " ";
                        } else {
                            current += w + " ";
                        }
                    });
                    lines.push(current.trim());
                    return lines;
                }
                return label;
            });
        }
    </script>
</body>
</html>